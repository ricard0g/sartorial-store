{% comment %}
    Main Search Snippet that appears on Landing Page for Tablet and Mobile screen sizes

    Usage:
        {% render 'main-search' %}
{% endcomment %}
<div class="main-search-small-screens">
    <predictive-search>
        <form>
            <label for="Search">Search</label>
            <input
                id="Search"
                type="search"
                name="q"
                value="{{ search.terms | escape }}"
                class="header-search-input-small-screens"
                role="combobox"
                aria-expanded="false"
                aria-owns="predictive-search-results"
                aria-controls="predictive-search-resulst"
                aria-haspopup="listbox"
                aria-autocomplete="list"
            >
            <input name="options[prefix]" type="hidden" value="last">

            <div id="predictive-search" tabindex="-1"></div>
        </form>
    </predictive-search>

    <div id="predictive-search-small-screens" tabindex="-1">
        {% if predictive_search.performed %}
            <div id="predictive-search-results-small-screens">
                {% if predictive_search.resources.products.size > 0 %}
                    <h3 id="predictive-search-products-small-screens">Product Suggestions</h3>
                    <ul class="products-list-small-screens" role="listbox" aria-labelledby="predictive-search-products">
                        {% for product in predictive_search.resources.products %}
                            <li class="product-item-small-screens" role="option">
                                <a href="{{ product.url }}">
                                    {{ product.featured_image | image_url: width: 50 | image_tag }}
                                    <span class="product-title-small-screens">{{ product.title }}</span>
                                </a>
                            </li>
                        {% endfor %}
                    </ul>
                {% endif %}
                <button>Search for "{{ predictive_search.terms }}"</button>
            </div>
        {% endif %}
    </div>
</div>
